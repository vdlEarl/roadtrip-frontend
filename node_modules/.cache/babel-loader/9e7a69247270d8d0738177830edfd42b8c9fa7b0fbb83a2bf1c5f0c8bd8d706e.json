{"ast":null,"code":"var _jsxFileName = \"/home/titouan/Documents/ROADTRIP/frontend/src/component/home/MapPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// component/home/MapPage.js\nimport React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Polyline, Marker, Popup, useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport axios from \"axios\";\nimport \"leaflet/dist/leaflet.css\";\nimport { useTripContext } from \"../context/TripContext\";\nimport { Fab } from \"@mui/material\";\nimport LocationSearchingIcon from \"@mui/icons-material/LocationSearching\";\nimport DirectionsIcon from \"@mui/icons-material/Directions\";\nimport itineraire from \"../../data/itineraire\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ORS_API_KEY = \"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImQ4ZjEzNGU3YjNmODRlOTg4NTMxYzZiNTk1MzliNzhlIiwiaCI6Im11cm11cjY0In0=\";\nconst userIcon = new L.Icon({\n  iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nconst FollowUserControl = ({\n  followUser\n}) => {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (!followUser) return;\n    const watchId = navigator.geolocation.watchPosition(pos => {\n      const coords = [pos.coords.latitude, pos.coords.longitude];\n      map.setView(coords, map.getZoom());\n    }, err => console.error(\"Erreur suivi :\", err), {\n      enableHighAccuracy: true\n    });\n    return () => navigator.geolocation.clearWatch(watchId);\n  }, [followUser, map]);\n  return null;\n};\n_s(FollowUserControl, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = FollowUserControl;\nconst MapPage = () => {\n  _s2();\n  const [userPosition, setUserPosition] = useState(null);\n  const [stepRoute, setStepRoute] = useState([]);\n  const [routeToStep, setRouteToStep] = useState([]);\n  const [fullRoute, setFullRoute] = useState([]);\n  const [followUser, setFollowUser] = useState(false);\n  const {\n    selectedStep,\n    selectedActivity\n  } = useTripContext();\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(pos => {\n      const coords = [pos.coords.latitude, pos.coords.longitude];\n      setUserPosition(coords);\n    }, err => {\n      console.error(\"Erreur GPS:\", err);\n      alert(\"La géolocalisation est nécessaire pour afficher l'itinéraire depuis ta position.\");\n    }, {\n      enableHighAccuracy: true\n    });\n  }, []);\n  useEffect(() => {\n    const generateStepRoute = async () => {\n      if (!selectedStep || selectedStep.etapes.length < 2) return;\n      const coords = selectedStep.etapes.map(v => [v.coords[1], v.coords[0]]);\n      try {\n        const res = await axios.post(\"https://api.openrouteservice.org/v2/directions/driving-car/geojson\", {\n          coordinates: coords\n        }, {\n          headers: {\n            Authorization: ORS_API_KEY,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        const route = res.data.features[0].geometry.coordinates.map(([lon, lat]) => [lat, lon]);\n        setStepRoute(route);\n        setFullRoute([]); // reset full route\n      } catch (e) {\n        console.error(\"Erreur ORS étape :\", e);\n      }\n    };\n    const generateRouteToClosestVille = async () => {\n      if (!userPosition || !selectedStep || selectedStep.etapes.length === 0) return;\n      const closest = selectedStep.etapes.reduce((min, curr) => {\n        const dist = Math.hypot(userPosition[0] - curr.coords[0], userPosition[1] - curr.coords[1]);\n        return dist < min.dist ? {\n          ville: curr,\n          dist\n        } : min;\n      }, {\n        ville: null,\n        dist: Infinity\n      }).ville;\n      try {\n        const res = await axios.post(\"https://api.openrouteservice.org/v2/directions/driving-car/geojson\", {\n          coordinates: [[userPosition[1], userPosition[0]], [closest.coords[1], closest.coords[0]]]\n        }, {\n          headers: {\n            Authorization: ORS_API_KEY,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        const route = res.data.features[0].geometry.coordinates.map(([lon, lat]) => [lat, lon]);\n        setRouteToStep(route);\n      } catch (e) {\n        console.error(\"Erreur ORS → ville la plus proche :\", e);\n      }\n    };\n    generateStepRoute();\n    generateRouteToClosestVille();\n  }, [selectedStep, userPosition]);\n  const handleShowFullTrip = async () => {\n    try {\n      const allCoords = itineraire.flatMap(etape => etape.etapes).map(ville => [ville.coords[1], ville.coords[0]]); // lon, lat\n\n      const res = await axios.post(\"https://api.openrouteservice.org/v2/directions/driving-car/geojson\", {\n        coordinates: allCoords\n      }, {\n        headers: {\n          Authorization: ORS_API_KEY,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      const route = res.data.features[0].geometry.coordinates.map(([lon, lat]) => [lat, lon]);\n      setFullRoute(route);\n      setStepRoute([]);\n      setRouteToStep([]);\n    } catch (e) {\n      console.error(\"Erreur ORS itinéraire complet :\", e);\n    }\n  };\n  useEffect(() => {\n    if (selectedActivity) {\n      setFullRoute([]);\n      setStepRoute([]);\n      setRouteToStep([]);\n    }\n  }, [selectedActivity]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100%\",\n      width: \"100%\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      center: selectedActivity ? selectedActivity.coords : [46.5, -1.5],\n      zoom: 6,\n      style: {\n        height: \"100%\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), selectedActivity && /*#__PURE__*/_jsxDEV(Marker, {\n        position: selectedActivity.coords,\n        icon: userIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: selectedActivity.lieu\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this), userPosition && /*#__PURE__*/_jsxDEV(Marker, {\n        position: userPosition,\n        icon: userIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Ta position\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this), stepRoute.length > 1 && /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: stepRoute,\n        color: \"blue\",\n        weight: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 34\n      }, this), routeToStep.length > 1 && /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: routeToStep,\n        color: \"gray\",\n        dashArray: \"5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 36\n      }, this), fullRoute.length > 1 && /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: fullRoute,\n        color: \"purple\",\n        weight: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(FollowUserControl, {\n        followUser: followUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      onClick: () => setFollowUser(!followUser),\n      color: followUser ? \"primary\" : \"default\",\n      size: \"medium\",\n      sx: {\n        position: \"absolute\",\n        top: 16,\n        right: 16,\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(LocationSearchingIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      color: \"secondary\",\n      size: \"small\",\n      onClick: handleShowFullTrip,\n      sx: {\n        position: \"absolute\",\n        bottom: 90,\n        right: 16,\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(DirectionsIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n};\n_s2(MapPage, \"xehe6L0uPLA/ClRQ3lLczbhzUJ0=\", false, function () {\n  return [useTripContext];\n});\n_c2 = MapPage;\nexport default MapPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"FollowUserControl\");\n$RefreshReg$(_c2, \"MapPage\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Polyline","Marker","Popup","useMap","L","axios","useTripContext","Fab","LocationSearchingIcon","DirectionsIcon","itineraire","jsxDEV","_jsxDEV","ORS_API_KEY","userIcon","Icon","iconUrl","iconSize","iconAnchor","FollowUserControl","followUser","_s","map","watchId","navigator","geolocation","watchPosition","pos","coords","latitude","longitude","setView","getZoom","err","console","error","enableHighAccuracy","clearWatch","_c","MapPage","_s2","userPosition","setUserPosition","stepRoute","setStepRoute","routeToStep","setRouteToStep","fullRoute","setFullRoute","setFollowUser","selectedStep","selectedActivity","getCurrentPosition","alert","generateStepRoute","etapes","length","v","res","post","coordinates","headers","Authorization","route","data","features","geometry","lon","lat","e","generateRouteToClosestVille","closest","reduce","min","curr","dist","Math","hypot","ville","Infinity","handleShowFullTrip","allCoords","flatMap","etape","style","height","width","position","children","center","zoom","url","fileName","_jsxFileName","lineNumber","columnNumber","icon","lieu","positions","color","weight","dashArray","onClick","size","sx","top","right","zIndex","bottom","_c2","$RefreshReg$"],"sources":["/home/titouan/Documents/ROADTRIP/frontend/src/component/home/MapPage.js"],"sourcesContent":["// component/home/MapPage.js\nimport React, { useEffect, useState } from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Polyline,\n  Marker,\n  Popup,\n  useMap,\n} from \"react-leaflet\";\nimport L from \"leaflet\";\nimport axios from \"axios\";\nimport \"leaflet/dist/leaflet.css\";\nimport { useTripContext } from \"../context/TripContext\";\nimport { Fab } from \"@mui/material\";\nimport LocationSearchingIcon from \"@mui/icons-material/LocationSearching\";\nimport DirectionsIcon from \"@mui/icons-material/Directions\";\nimport itineraire from \"../../data/itineraire\";\n\nconst ORS_API_KEY = \"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImQ4ZjEzNGU3YjNmODRlOTg4NTMxYzZiNTk1MzliNzhlIiwiaCI6Im11cm11cjY0In0=\";\n\nconst userIcon = new L.Icon({\n  iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n});\n\nconst FollowUserControl = ({ followUser }) => {\n  const map = useMap();\n\n  useEffect(() => {\n    if (!followUser) return;\n\n    const watchId = navigator.geolocation.watchPosition(\n      (pos) => {\n        const coords = [pos.coords.latitude, pos.coords.longitude];\n        map.setView(coords, map.getZoom());\n      },\n      (err) => console.error(\"Erreur suivi :\", err),\n      { enableHighAccuracy: true }\n    );\n\n    return () => navigator.geolocation.clearWatch(watchId);\n  }, [followUser, map]);\n\n  return null;\n};\n\nconst MapPage = () => {\n  const [userPosition, setUserPosition] = useState(null);\n  const [stepRoute, setStepRoute] = useState([]);\n  const [routeToStep, setRouteToStep] = useState([]);\n  const [fullRoute, setFullRoute] = useState([]);\n  const [followUser, setFollowUser] = useState(false);\n  const { selectedStep, selectedActivity } = useTripContext();\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      (pos) => {\n        const coords = [pos.coords.latitude, pos.coords.longitude];\n        setUserPosition(coords);\n      },\n      (err) => {\n        console.error(\"Erreur GPS:\", err);\n        alert(\"La géolocalisation est nécessaire pour afficher l'itinéraire depuis ta position.\");\n      },\n      { enableHighAccuracy: true }\n    );\n  }, []);\n\n  useEffect(() => {\n    const generateStepRoute = async () => {\n      if (!selectedStep || selectedStep.etapes.length < 2) return;\n\n      const coords = selectedStep.etapes.map((v) => [v.coords[1], v.coords[0]]);\n      try {\n        const res = await axios.post(\n          \"https://api.openrouteservice.org/v2/directions/driving-car/geojson\",\n          { coordinates: coords },\n          {\n            headers: {\n              Authorization: ORS_API_KEY,\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n        const route = res.data.features[0].geometry.coordinates.map(([lon, lat]) => [lat, lon]);\n        setStepRoute(route);\n        setFullRoute([]); // reset full route\n      } catch (e) {\n        console.error(\"Erreur ORS étape :\", e);\n      }\n    };\n\n    const generateRouteToClosestVille = async () => {\n      if (!userPosition || !selectedStep || selectedStep.etapes.length === 0) return;\n\n      const closest = selectedStep.etapes.reduce(\n        (min, curr) => {\n          const dist = Math.hypot(\n            userPosition[0] - curr.coords[0],\n            userPosition[1] - curr.coords[1]\n          );\n          return dist < min.dist ? { ville: curr, dist } : min;\n        },\n        { ville: null, dist: Infinity }\n      ).ville;\n\n      try {\n        const res = await axios.post(\n          \"https://api.openrouteservice.org/v2/directions/driving-car/geojson\",\n          {\n            coordinates: [\n              [userPosition[1], userPosition[0]],\n              [closest.coords[1], closest.coords[0]],\n            ],\n          },\n          {\n            headers: {\n              Authorization: ORS_API_KEY,\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n        const route = res.data.features[0].geometry.coordinates.map(([lon, lat]) => [lat, lon]);\n        setRouteToStep(route);\n      } catch (e) {\n        console.error(\"Erreur ORS → ville la plus proche :\", e);\n      }\n    };\n\n    generateStepRoute();\n    generateRouteToClosestVille();\n  }, [selectedStep, userPosition]);\n\n  const handleShowFullTrip = async () => {\n    try {\n      const allCoords = itineraire\n        .flatMap((etape) => etape.etapes)\n        .map((ville) => [ville.coords[1], ville.coords[0]]); // lon, lat\n\n      const res = await axios.post(\n        \"https://api.openrouteservice.org/v2/directions/driving-car/geojson\",\n        { coordinates: allCoords },\n        {\n          headers: {\n            Authorization: ORS_API_KEY,\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      const route = res.data.features[0].geometry.coordinates.map(([lon, lat]) => [lat, lon]);\n      setFullRoute(route);\n      setStepRoute([]);\n      setRouteToStep([]);\n    } catch (e) {\n      console.error(\"Erreur ORS itinéraire complet :\", e);\n    }\n  };\n  useEffect(() => {\n    if (selectedActivity) {\n      setFullRoute([]);\n      setStepRoute([]);\n      setRouteToStep([]);\n    }\n  }, [selectedActivity]);\n  \n\n  return (\n    <div style={{ height: \"100%\", width: \"100%\", position: \"relative\" }}>\n      <MapContainer center={selectedActivity ? selectedActivity.coords : [46.5, -1.5]} zoom={6} style={{ height: \"100%\", width: \"100%\" }}>\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n        {selectedActivity && (\n          <Marker position={selectedActivity.coords} icon={userIcon}>\n            <Popup>{selectedActivity.lieu}</Popup>\n          </Marker>\n        )}\n\n        {userPosition && (\n          <Marker position={userPosition} icon={userIcon}>\n            <Popup>Ta position</Popup>\n          </Marker>\n        )}\n\n        {stepRoute.length > 1 && <Polyline positions={stepRoute} color=\"blue\" weight={6} />}\n        {routeToStep.length > 1 && <Polyline positions={routeToStep} color=\"gray\" dashArray=\"5\" />}\n        {fullRoute.length > 1 && <Polyline positions={fullRoute} color=\"purple\" weight={6} />}\n\n        <FollowUserControl followUser={followUser} />\n      </MapContainer>\n\n      <Fab\n        onClick={() => setFollowUser(!followUser)}\n        color={followUser ? \"primary\" : \"default\"}\n        size=\"medium\"\n        sx={{ position: \"absolute\", top: 16, right: 16, zIndex: 1000 }}\n      >\n        <LocationSearchingIcon />\n      </Fab>\n\n      <Fab\n        color=\"secondary\"\n        size=\"small\"\n        onClick={handleShowFullTrip}\n        sx={{\n          position: \"absolute\",\n          bottom: 90,\n          right: 16,\n          zIndex: 1000,\n        }}\n      >\n        <DirectionsIcon />\n      </Fab>\n    </div>\n  );\n};\n\nexport default MapPage;\n"],"mappings":";;;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SACEC,YAAY,EACZC,SAAS,EACTC,QAAQ,EACRC,MAAM,EACNC,KAAK,EACLC,MAAM,QACD,eAAe;AACtB,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,0BAA0B;AACjC,SAASC,cAAc,QAAQ,wBAAwB;AACvD,SAASC,GAAG,QAAQ,eAAe;AACnC,OAAOC,qBAAqB,MAAM,uCAAuC;AACzE,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,OAAOC,UAAU,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,WAAW,GAAG,0HAA0H;AAE9I,MAAMC,QAAQ,GAAG,IAAIV,CAAC,CAACW,IAAI,CAAC;EAC1BC,OAAO,EAAE,6DAA6D;EACtEC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;EAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;AACrB,CAAC,CAAC;AAEF,MAAMC,iBAAiB,GAAGA,CAAC;EAAEC;AAAW,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAMC,GAAG,GAAGnB,MAAM,CAAC,CAAC;EAEpBP,SAAS,CAAC,MAAM;IACd,IAAI,CAACwB,UAAU,EAAE;IAEjB,MAAMG,OAAO,GAAGC,SAAS,CAACC,WAAW,CAACC,aAAa,CAChDC,GAAG,IAAK;MACP,MAAMC,MAAM,GAAG,CAACD,GAAG,CAACC,MAAM,CAACC,QAAQ,EAAEF,GAAG,CAACC,MAAM,CAACE,SAAS,CAAC;MAC1DR,GAAG,CAACS,OAAO,CAACH,MAAM,EAAEN,GAAG,CAACU,OAAO,CAAC,CAAC,CAAC;IACpC,CAAC,EACAC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC,EAC7C;MAAEG,kBAAkB,EAAE;IAAK,CAC7B,CAAC;IAED,OAAO,MAAMZ,SAAS,CAACC,WAAW,CAACY,UAAU,CAACd,OAAO,CAAC;EACxD,CAAC,EAAE,CAACH,UAAU,EAAEE,GAAG,CAAC,CAAC;EAErB,OAAO,IAAI;AACb,CAAC;AAACD,EAAA,CAnBIF,iBAAiB;EAAA,QACThB,MAAM;AAAA;AAAAmC,EAAA,GADdnB,iBAAiB;AAqBvB,MAAMoB,OAAO,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACpB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG7C,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC8C,SAAS,EAAEC,YAAY,CAAC,GAAG/C,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACgD,WAAW,EAAEC,cAAc,CAAC,GAAGjD,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACkD,SAAS,EAAEC,YAAY,CAAC,GAAGnD,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACuB,UAAU,EAAE6B,aAAa,CAAC,GAAGpD,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM;IAAEqD,YAAY;IAAEC;EAAiB,CAAC,GAAG7C,cAAc,CAAC,CAAC;EAE3DV,SAAS,CAAC,MAAM;IACd4B,SAAS,CAACC,WAAW,CAAC2B,kBAAkB,CACrCzB,GAAG,IAAK;MACP,MAAMC,MAAM,GAAG,CAACD,GAAG,CAACC,MAAM,CAACC,QAAQ,EAAEF,GAAG,CAACC,MAAM,CAACE,SAAS,CAAC;MAC1DY,eAAe,CAACd,MAAM,CAAC;IACzB,CAAC,EACAK,GAAG,IAAK;MACPC,OAAO,CAACC,KAAK,CAAC,aAAa,EAAEF,GAAG,CAAC;MACjCoB,KAAK,CAAC,kFAAkF,CAAC;IAC3F,CAAC,EACD;MAAEjB,kBAAkB,EAAE;IAAK,CAC7B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENxC,SAAS,CAAC,MAAM;IACd,MAAM0D,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpC,IAAI,CAACJ,YAAY,IAAIA,YAAY,CAACK,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;MAErD,MAAM5B,MAAM,GAAGsB,YAAY,CAACK,MAAM,CAACjC,GAAG,CAAEmC,CAAC,IAAK,CAACA,CAAC,CAAC7B,MAAM,CAAC,CAAC,CAAC,EAAE6B,CAAC,CAAC7B,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;MACzE,IAAI;QACF,MAAM8B,GAAG,GAAG,MAAMrD,KAAK,CAACsD,IAAI,CAC1B,oEAAoE,EACpE;UAAEC,WAAW,EAAEhC;QAAO,CAAC,EACvB;UACEiC,OAAO,EAAE;YACPC,aAAa,EAAEjD,WAAW;YAC1B,cAAc,EAAE;UAClB;QACF,CACF,CAAC;QACD,MAAMkD,KAAK,GAAGL,GAAG,CAACM,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACN,WAAW,CAACtC,GAAG,CAAC,CAAC,CAAC6C,GAAG,EAAEC,GAAG,CAAC,KAAK,CAACA,GAAG,EAAED,GAAG,CAAC,CAAC;QACvFvB,YAAY,CAACmB,KAAK,CAAC;QACnBf,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC,OAAOqB,CAAC,EAAE;QACVnC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEkC,CAAC,CAAC;MACxC;IACF,CAAC;IAED,MAAMC,2BAA2B,GAAG,MAAAA,CAAA,KAAY;MAC9C,IAAI,CAAC7B,YAAY,IAAI,CAACS,YAAY,IAAIA,YAAY,CAACK,MAAM,CAACC,MAAM,KAAK,CAAC,EAAE;MAExE,MAAMe,OAAO,GAAGrB,YAAY,CAACK,MAAM,CAACiB,MAAM,CACxC,CAACC,GAAG,EAAEC,IAAI,KAAK;QACb,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CACrBpC,YAAY,CAAC,CAAC,CAAC,GAAGiC,IAAI,CAAC9C,MAAM,CAAC,CAAC,CAAC,EAChCa,YAAY,CAAC,CAAC,CAAC,GAAGiC,IAAI,CAAC9C,MAAM,CAAC,CAAC,CACjC,CAAC;QACD,OAAO+C,IAAI,GAAGF,GAAG,CAACE,IAAI,GAAG;UAAEG,KAAK,EAAEJ,IAAI;UAAEC;QAAK,CAAC,GAAGF,GAAG;MACtD,CAAC,EACD;QAAEK,KAAK,EAAE,IAAI;QAAEH,IAAI,EAAEI;MAAS,CAChC,CAAC,CAACD,KAAK;MAEP,IAAI;QACF,MAAMpB,GAAG,GAAG,MAAMrD,KAAK,CAACsD,IAAI,CAC1B,oEAAoE,EACpE;UACEC,WAAW,EAAE,CACX,CAACnB,YAAY,CAAC,CAAC,CAAC,EAAEA,YAAY,CAAC,CAAC,CAAC,CAAC,EAClC,CAAC8B,OAAO,CAAC3C,MAAM,CAAC,CAAC,CAAC,EAAE2C,OAAO,CAAC3C,MAAM,CAAC,CAAC,CAAC,CAAC;QAE1C,CAAC,EACD;UACEiC,OAAO,EAAE;YACPC,aAAa,EAAEjD,WAAW;YAC1B,cAAc,EAAE;UAClB;QACF,CACF,CAAC;QACD,MAAMkD,KAAK,GAAGL,GAAG,CAACM,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACN,WAAW,CAACtC,GAAG,CAAC,CAAC,CAAC6C,GAAG,EAAEC,GAAG,CAAC,KAAK,CAACA,GAAG,EAAED,GAAG,CAAC,CAAC;QACvFrB,cAAc,CAACiB,KAAK,CAAC;MACvB,CAAC,CAAC,OAAOM,CAAC,EAAE;QACVnC,OAAO,CAACC,KAAK,CAAC,qCAAqC,EAAEkC,CAAC,CAAC;MACzD;IACF,CAAC;IAEDf,iBAAiB,CAAC,CAAC;IACnBgB,2BAA2B,CAAC,CAAC;EAC/B,CAAC,EAAE,CAACpB,YAAY,EAAET,YAAY,CAAC,CAAC;EAEhC,MAAMuC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAI;MACF,MAAMC,SAAS,GAAGvE,UAAU,CACzBwE,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAAC5B,MAAM,CAAC,CAChCjC,GAAG,CAAEwD,KAAK,IAAK,CAACA,KAAK,CAAClD,MAAM,CAAC,CAAC,CAAC,EAAEkD,KAAK,CAAClD,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEvD,MAAM8B,GAAG,GAAG,MAAMrD,KAAK,CAACsD,IAAI,CAC1B,oEAAoE,EACpE;QAAEC,WAAW,EAAEqB;MAAU,CAAC,EAC1B;QACEpB,OAAO,EAAE;UACPC,aAAa,EAAEjD,WAAW;UAC1B,cAAc,EAAE;QAClB;MACF,CACF,CAAC;MACD,MAAMkD,KAAK,GAAGL,GAAG,CAACM,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACN,WAAW,CAACtC,GAAG,CAAC,CAAC,CAAC6C,GAAG,EAAEC,GAAG,CAAC,KAAK,CAACA,GAAG,EAAED,GAAG,CAAC,CAAC;MACvFnB,YAAY,CAACe,KAAK,CAAC;MACnBnB,YAAY,CAAC,EAAE,CAAC;MAChBE,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,CAAC,OAAOuB,CAAC,EAAE;MACVnC,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEkC,CAAC,CAAC;IACrD;EACF,CAAC;EACDzE,SAAS,CAAC,MAAM;IACd,IAAIuD,gBAAgB,EAAE;MACpBH,YAAY,CAAC,EAAE,CAAC;MAChBJ,YAAY,CAAC,EAAE,CAAC;MAChBE,cAAc,CAAC,EAAE,CAAC;IACpB;EACF,CAAC,EAAE,CAACK,gBAAgB,CAAC,CAAC;EAGtB,oBACEvC,OAAA;IAAKwE,KAAK,EAAE;MAAEC,MAAM,EAAE,MAAM;MAAEC,KAAK,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAW,CAAE;IAAAC,QAAA,gBAClE5E,OAAA,CAACd,YAAY;MAAC2F,MAAM,EAAEtC,gBAAgB,GAAGA,gBAAgB,CAACvB,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,CAAE;MAAC8D,IAAI,EAAE,CAAE;MAACN,KAAK,EAAE;QAAEC,MAAM,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAE,QAAA,gBACjI5E,OAAA,CAACb,SAAS;QAAC4F,GAAG,EAAC;MAAoD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACrE5C,gBAAgB,iBACfvC,OAAA,CAACX,MAAM;QAACsF,QAAQ,EAAEpC,gBAAgB,CAACvB,MAAO;QAACoE,IAAI,EAAElF,QAAS;QAAA0E,QAAA,eACxD5E,OAAA,CAACV,KAAK;UAAAsF,QAAA,EAAErC,gBAAgB,CAAC8C;QAAI;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CACT,EAEAtD,YAAY,iBACX7B,OAAA,CAACX,MAAM;QAACsF,QAAQ,EAAE9C,YAAa;QAACuD,IAAI,EAAElF,QAAS;QAAA0E,QAAA,eAC7C5E,OAAA,CAACV,KAAK;UAAAsF,QAAA,EAAC;QAAW;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CACT,EAEApD,SAAS,CAACa,MAAM,GAAG,CAAC,iBAAI5C,OAAA,CAACZ,QAAQ;QAACkG,SAAS,EAAEvD,SAAU;QAACwD,KAAK,EAAC,MAAM;QAACC,MAAM,EAAE;MAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAClFlD,WAAW,CAACW,MAAM,GAAG,CAAC,iBAAI5C,OAAA,CAACZ,QAAQ;QAACkG,SAAS,EAAErD,WAAY;QAACsD,KAAK,EAAC,MAAM;QAACE,SAAS,EAAC;MAAG;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACzFhD,SAAS,CAACS,MAAM,GAAG,CAAC,iBAAI5C,OAAA,CAACZ,QAAQ;QAACkG,SAAS,EAAEnD,SAAU;QAACoD,KAAK,EAAC,QAAQ;QAACC,MAAM,EAAE;MAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAErFnF,OAAA,CAACO,iBAAiB;QAACC,UAAU,EAAEA;MAAW;QAAAwE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjC,CAAC,eAEfnF,OAAA,CAACL,GAAG;MACF+F,OAAO,EAAEA,CAAA,KAAMrD,aAAa,CAAC,CAAC7B,UAAU,CAAE;MAC1C+E,KAAK,EAAE/E,UAAU,GAAG,SAAS,GAAG,SAAU;MAC1CmF,IAAI,EAAC,QAAQ;MACbC,EAAE,EAAE;QAAEjB,QAAQ,EAAE,UAAU;QAAEkB,GAAG,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAK,CAAE;MAAAnB,QAAA,eAE/D5E,OAAA,CAACJ,qBAAqB;QAAAoF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtB,CAAC,eAENnF,OAAA,CAACL,GAAG;MACF4F,KAAK,EAAC,WAAW;MACjBI,IAAI,EAAC,OAAO;MACZD,OAAO,EAAEtB,kBAAmB;MAC5BwB,EAAE,EAAE;QACFjB,QAAQ,EAAE,UAAU;QACpBqB,MAAM,EAAE,EAAE;QACVF,KAAK,EAAE,EAAE;QACTC,MAAM,EAAE;MACV,CAAE;MAAAnB,QAAA,eAEF5E,OAAA,CAACH,cAAc;QAAAmF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACf,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACvD,GAAA,CAvKID,OAAO;EAAA,QAMgCjC,cAAc;AAAA;AAAAuG,GAAA,GANrDtE,OAAO;AAyKb,eAAeA,OAAO;AAAC,IAAAD,EAAA,EAAAuE,GAAA;AAAAC,YAAA,CAAAxE,EAAA;AAAAwE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}